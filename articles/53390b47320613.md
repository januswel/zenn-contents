---
title: "monorepo ã§ React Native without framework ã‚’ä½¿ã†"
emoji: "ğŸï¸"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["reactnative"]
published: true
---

ç¢ºèªã—ãŸãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯ v0.74 ã®ã¿ã€‚

ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ãªã—ã® React Native ã‚’ monorepo ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã²ã¨ã¤ã¨ã—ã¦ initialize ã—ãŸå ´åˆã€ãã®ã¾ã¾ã§ã¯ Metro ã§æ¬¡ã®ã‚ˆã†ãªã‚¨ãƒ©ãƒ¼ãŒå‡ºã‚‹ã€‚

```
Unable to resolve module @babel/runtime/helpers/interopRequireDefault
```

[metro.config.js ã§ `watchFolders` ã¨ã—ã¦ monorepo ãƒ«ãƒ¼ãƒˆã‚’æŒ‡å®šã™ã‚‹ã¨è§£æ±ºã™ã‚‹](https://stackoverflow.com/a/78243319/26427523)ã€‚

```javascript
const { getDefaultConfig, mergeConfig } = require("@react-native/metro-config");
const path = require("path");

const monorepoRoot = path.resolve(__dirname, "../../");

/**
 * Metro configuration
 * https://reactnative.dev/docs/metro
 *
 * @type {import('metro-config').MetroConfig}
 */
const config = {
  watchFolders: [monorepoRoot],
};

module.exports = mergeConfig(getDefaultConfig(__dirname), config);
```

Metro ãŒä½¿ã£ã¦ã‚‹ babel è¨­å®šã§å·¡ã‚Šå·¡ã£ã¦ `@babel/runtime` ã‚’å‚ç…§ã—ã¦ã„ã‚‹ã¿ãŸã„ã ãŒã†ã¾ã„ã“ã¨è§£æ±ºã§ãã¦ã„ãªã„ã‚ˆã†ã ã€‚ monorepo ã®ãƒ«ãƒ¼ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ¼ã«ã‚ã‚‹ `node_modules` ã«ã¯ã‚ã‚‹ã‚ˆã†ãªã®ã§ Metro ãŒãã“ã‚’è¦‹ã‚‰ã‚Œã‚‹ã‚ˆã†ã«ã™ã‚‹ã“ã¨ã§è§£æ±ºã§ãã‚‹ã€‚

ä¾å­˜ã¨ã—ã¦ `@babel/runtime` ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã®ã§ã¯è§£æ±ºã§ããªã„ã€‚ã¡ã‚ƒã‚“ã¨è¿½ã£ã¦ãªã„ãŒã€å†…éƒ¨ã§ä½¿ã£ã¦ã„ã‚‹ babel ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãŒè¦‹ã«ã„ããƒ‘ã‚¹ãŒ monorepo ãƒ«ãƒ¼ãƒˆã«ãªã£ã¦ã„ã¦ `@babel/runtime` ãŒè¦‹ã¤ã‹ã‚‰ãªã„ã¨ã„ã†å•é¡Œã¨æ€ã‚ã‚Œã‚‹ã€‚
