---
title: "unified ã‚’ä½¿ã£ã¦ã‚ªãƒ¬ã‚ªãƒ¬ Markdown ã‚’ ReactElement ã«å¤‰æ›ã™ã‚‹"
emoji: "ğŸ’¯"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: [unified,JavaScript,TypeScript,Markdown,React]
published: false
---

ä¸€é€£ã® unified è¨˜äº‹ã®æœ€å¾Œã§ã™ã€‚å¥½ããªã‚ˆã†ã«æ‹¡å¼µã—ãŸ Markdown ã‚’è§£æã—ã¦ ReactElement ã«å¤‰æ›ã—ã€ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã™ã‚‹æ–¹æ³•ã‚’æ›¸ãã¾ã™ã€‚

ã‚ã‹ã‚‰ãªã„è¨€è‘‰ã¯[ç”¨èªã‚’ã¾ã¨ã‚ãŸè¨˜äº‹](https://zenn.dev/januswel/articles/e4f979b875298e372070)ã‚’å‚ç…§ã—ã¦ã¿ã¦ãã ã•ã„ã€‚

## ç¾åœ¨ã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

2021 å¹´ 4 æœˆç¾åœ¨ã€æ¬¡ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’çµ„ã¿åˆã‚ã›ã¦ä½¿ã†ã®ãŒè‰¯ã•ãã†ã§ã™ã€‚

- [remark-parse](https://github.com/remarkjs/remark/tree/main/packages/remark-parse)
- [remark-rehype](https://github.com/remarkjs/remark-rehype)
- [rehype-react](https://github.com/rehypejs/rehype-react)

### ã‚³ãƒ¼ãƒ‰ä¾‹

[ä»¥å‰ä½œã£ãŸ Zenn ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¨˜æ³•ã‚’è§£é‡ˆã™ã‚‹ãƒ—ãƒ©ã‚°ã‚¤ãƒ³](https://zenn.dev/januswel/articles/745787422d425b01e0c1)ã‚’ä½¿ã†éš›ã®ã‚³ãƒ¼ãƒ‰ä¾‹ã§ã™ã€‚

```typescript:processor.ts
import React from "react";
import unified from "unified";
import parser from "remark-parse";
import mdast2hast from "remark-rehype";
import compiler from "rehype-react";

import { attacher, handler } from "./zenn-message";

const processor = unified()
  .use(parser)
  .use(attacher)
  .use(mdast2hast, { handlers: { message: handler } })
  .use(compiler, { createElement: React.createElement });

export default processor;
```

å¤‰æ›å‡¦ç†ã‚’ã“ã®ã‚ˆã†ã«å®šç¾©ã—ã¦ãŠã„ã¦ã€æ¬¡ã®ã‚ˆã†ã«ä½¿ã„ã¾ã™ã€‚

```tsx:App.tsx
import React from "react";
import processor from "./processor";

const SAMPLE = `
:::message
This is a message
:::

:::message
But this is not a message
::

~~~markdown
# Heading 1

**strong**
~~~
`;

function App() {
  return (
    <>
      <h1>This is a Markdown</h1>
      {processor.processSync(SAMPLE).result}
    </>
  );
}

export default App;
```

ã“ã‚Œã‚’è¡¨ç¤ºã•ã›ã‚‹ã¨ã€æ¬¡ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

![è¡¨ç¤ºä¾‹](https://storage.googleapis.com/zenn-user-upload/21aug5ogipszfcasvtc2cws3mjnr)

æ„å›³é€šã‚Šã«ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã•ã‚Œã¦ã„ã¾ã™ã­ã€‚

## ãã®ä»–ã®é¸æŠè‚¢

[remark ã®ä¸­ã®äººã«è³ªå•ã—ã¦å¾—ãŸæƒ…å ±](https://github.com/remarkjs/remark/discussions/694#discussioncomment-640688)ã‹ã‚‰åˆ¤æ–­ã—ã¦ã„ã¾ã™ã€‚

### [remark-react](https://github.com/remarkjs/remark-react) ã¯ä½¿ã‚ãªã„ã®ï¼Ÿ

ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã•ã‚Œãªããªã‚‹äºˆå®šã§ã™ã€‚ã¾ãŸã€ç¾æ™‚ç‚¹ã§ TypeScript å¯¾å¿œã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚

### ã˜ã‚ƒã‚ [react-markdown](https://github.com/remarkjs/react-markdown) ã¯ï¼Ÿ

react-markdown ã¯ Markdown ã‹ã‚‰ ReactElement ã¸ãƒ©ã‚¤ãƒˆã«å¤‰æ›ã—ãŸã„å ´åˆã‚’æƒ³å®šã—ãŸãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¨ã®ã“ã¨ã§ã™ã€‚

å®Ÿéš›ã« react-markdown ã¯è¨­å®šã‚’ç´°ã‹ãæŒ‡å®šã™ã‚‹ã“ã¨ãŒã§ããªã„åˆ†ã€æ¬¡ã®ã‚ˆã†ã«ä½¿ã†ã“ã¨ãŒã§ãã¦éå¸¸ã«æ¥½ã§ã™ã€‚

```tsx
import React from "react";
import ReactMarkdown from "react-markdown";
import { render } from "react-dom";

render(<ReactMarkdown># Hello, *world*!</ReactMarkdown>, document.body);
```

### [react-remark](https://github.com/remarkjs/react-remark) ã§ã¯ Hooks ãŒç”¨æ„ã•ã‚Œã¦ã‚‹ã‘ã©â€¦ï¼Ÿ

React 17 ã§å‹•ã‹ãªã„ã‚ˆã†ã§ã™ã€‚æ·±è¿½ã„ã™ã‚‹æ°—åŠ›ãŒãªãâ€¦ã€‚

ãŸã ã—ã€ä»Šå¾Œã“ã‚ŒãŒãƒ¡ã‚¤ãƒ³ã§ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã•ã‚Œã¦ã„ãã‚ˆã†ã§ã™ã€‚
